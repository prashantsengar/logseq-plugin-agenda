import{r as p,o as e,c as o,a as n,b as t,F as l,d as s,e as c}from"./app.2d01ef46.js";import{_ as u,a as r,b as i}from"./otherQuery3.ea72d12e.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";const b={},m=n("h1",{id:"query-example",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#query-example","aria-hidden":"true"},"#"),s(" Query Example")],-1),d=n("h2",{id:"use-journal-page-instead-of-scheduled",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#use-journal-page-instead-of-scheduled","aria-hidden":"true"},"#"),s(" Use journal page instead of scheduled")],-1),y={href:"https://github.com/haydenull/logseq-plugin-agenda/issues/19",target:"_blank",rel:"noopener noreferrer"},g=s("issue19"),h=c('<p>note: <img src="'+u+`" alt=""></p><p>The configuration is as follows:</p><p>Query Script:</p><div class="language-clojure ext-clojure line-numbers-mode"><pre class="language-clojure"><code><span class="token punctuation">[</span><span class="token symbol">:find</span> <span class="token punctuation">(</span><span class="token function">pull</span>
  ?block
  <span class="token punctuation">[</span><span class="token symbol">:block/uuid</span>
    <span class="token symbol">:block/parent</span>
    <span class="token symbol">:db/id</span>
    <span class="token symbol">:block/left</span>
    <span class="token symbol">:block/collapsed?</span>
    <span class="token symbol">:block/format</span>
    <span class="token symbol">:block/_refs</span>
    <span class="token symbol">:block/path-refs</span>
    <span class="token symbol">:block/tags</span>
    <span class="token symbol">:block/content</span>
    <span class="token symbol">:block/marker</span>
    <span class="token symbol">:block/priority</span>
    <span class="token symbol">:block/properties</span>
    <span class="token symbol">:block/pre-block?</span>
    <span class="token symbol">:block/scheduled</span>
    <span class="token symbol">:block/deadline</span>
    <span class="token symbol">:block/repeated?</span>
    <span class="token symbol">:block/created-at</span>
    <span class="token symbol">:block/updated-at</span>
    <span class="token symbol">:block/file</span>
    <span class="token symbol">:block/heading-level</span>
    <span class="token punctuation">{</span><span class="token symbol">:block/page</span>
      <span class="token punctuation">[</span><span class="token symbol">:db/id</span> <span class="token symbol">:block/name</span> <span class="token symbol">:block/original-name</span> <span class="token symbol">:block/journal-day</span> <span class="token symbol">:block/journal?</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token symbol">:block/refs</span>
      <span class="token punctuation">[</span><span class="token symbol">:block/journal-day</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token symbol">:where</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/marker</span> ?marker<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>?rp <span class="token symbol">:block/journal?</span> <span class="token boolean">true</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/refs</span> ?rp<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;TODO&quot;</span> <span class="token string">&quot;DOING&quot;</span> <span class="token string">&quot;NOW&quot;</span> <span class="token string">&quot;LATER&quot;</span> <span class="token string">&quot;WAITING&quot;</span> <span class="token string">&quot;DONE&quot;</span><span class="token punctuation">}</span> ?marker<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>Schedule Start: <code>refs[0].journal-day</code></p><p>Date Formatter: <code>yyyyMMdd</code></p><p><img src="`+r+'" alt=""></p><p>Calendar: <img src="'+i+`" alt=""></p><h2 id="exclude-specified-page-from-default-journal-calendar" tabindex="-1"><a class="header-anchor" href="#exclude-specified-page-from-default-journal-calendar" aria-hidden="true">#</a> Exclude specified page from default journal calendar</h2><p>Defaut journal calendar will search all pages, but you can exclude some pages by setting query script.</p><p>If you want to exclude a page named <code>your project</code>, you can add the following code to your query script:</p><div class="language-clojure ext-clojure line-numbers-mode"><pre class="language-clojure"><code>  <span class="token punctuation">[</span>?page <span class="token symbol">:block/name</span> ?pname<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/page</span> ?page<span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">not</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;your project&quot;</span><span class="token punctuation">}</span> ?pname<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The original query script of query1 is as follows:</p><div class="language-clojure ext-clojure line-numbers-mode"><pre class="language-clojure"><code><span class="token punctuation">[</span><span class="token symbol">:find</span> <span class="token punctuation">(</span><span class="token function">pull</span> ?block <span class="token punctuation">[</span>*<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token symbol">:where</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/marker</span> ?marker<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token function">missing?</span> $ ?block <span class="token symbol">:block/deadline</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">not</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token function">missing?</span> $ ?block <span class="token symbol">:block/scheduled</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;TODO&quot;</span> <span class="token string">&quot;DOING&quot;</span> <span class="token string">&quot;NOW&quot;</span> <span class="token string">&quot;LATER&quot;</span> <span class="token string">&quot;WAITING&quot;</span> <span class="token string">&quot;DONE&quot;</span><span class="token punctuation">}</span> ?marker<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>The script after the modification is as follows:</p><div class="language-clojure ext-clojure line-numbers-mode"><pre class="language-clojure"><code><span class="token punctuation">[</span><span class="token symbol">:find</span> <span class="token punctuation">(</span><span class="token function">pull</span> ?block <span class="token punctuation">[</span>*<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token symbol">:where</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/marker</span> ?marker<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token function">missing?</span> $ ?block <span class="token symbol">:block/deadline</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">not</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token function">missing?</span> $ ?block <span class="token symbol">:block/scheduled</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">[</span>?page <span class="token symbol">:block/name</span> ?pname<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/page</span> ?page<span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">not</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;your project&quot;</span><span class="token punctuation">}</span> ?pname<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;TODO&quot;</span> <span class="token string">&quot;DOING&quot;</span> <span class="token string">&quot;NOW&quot;</span> <span class="token string">&quot;LATER&quot;</span> <span class="token string">&quot;WAITING&quot;</span> <span class="token string">&quot;DONE&quot;</span><span class="token punctuation">}</span> ?marker<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br></div><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div>`,16);function f(q,_){const a=p("ExternalLinkIcon");return e(),o(l,null,[m,d,n("p",null,[n("a",y,[g,t(a)])]),h],64)}var w=k(b,[["render",f]]);export{w as default};
